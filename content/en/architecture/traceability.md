---
title: "Microservices Traceability"
date: 2017-11-06T11:14:26-05:00
description: "Microservices Traceability"
categories: []
keywords: [architecture]
menu:
  docs:
    parent: "architecture"
    weight: 10
weight: 10
aliases: []
toc: false
draft: false
---

For microservices architecture, it is very important to trace request from one service to 
another in the entire call tree in order to have big picture if something happens or have
an audit log that is aggregated by database or Splunk.   

In the framework, we have two Ids to serve this purpose. 

## X-Traceability-Id 

* Generated by client
* Unique for this client only 
* Can be database sequence number or UUID
* Must be passed to the next service
* Must be returned to the caller
* Will be logged in per request audit log


## X-Correlation-Id
* Generated in the immediate service from client
* Must be UUID
* Must be passed to the next service
* Will be logged in per request audit log
* Every service/API must check if this id available and generate one if doesn't exist in request header.

# Pass Ids to the next service/API

In order to pass these ids to the next service, the call to the next service
must use Client module provided by the framework. It will put these ids to
the HttpRequest header with method calls.

Hers is an example to set JWT tokens, traceabilityId and correlationId

```

```

# Recommended Log Analysis Tool

[ELK/Logstash (Open Source)](https://www.elastic.co/products/logstash)

[Graylog (Open Source with commercial version)](https://github.com/Graylog2/graylog2-server)

[Splunk (Commercial)](https://www.splunk.com/)

